(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article"],{"2cc2":function(t,e,i){"use strict";var o=i("5bd8"),r=i.n(o);r.a},"5bd8":function(t,e,i){},d0ea:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("c-container",{staticClass:"article-wrapper"},[i("transition",{attrs:{name:"fade-cross"}},[i("c-row",{directives:[{name:"show",rawName:"v-show",value:!t.isShowArticleList,expression:"!isShowArticleList"}],staticClass:"skeleton",style:t.articleStyle},t._l(15,function(e,o){return i("c-col",{key:o,attrs:{options:t.colOptions}},[i("c-card",{attrs:{options:t.cardOptions}},[i("div",{staticClass:"header"}),i("div",{staticClass:"body"}),i("div",{staticClass:"footer"})])],1)}))],1),i("transition",{attrs:{name:"fade-cross"}},[i("c-row",{directives:[{name:"show",rawName:"v-show",value:t.isShowArticleList,expression:"isShowArticleList"}],ref:"article",staticClass:"article",style:t.articleStyle,on:{scroll:t.articleScroll}},[t._l(t.articleList,function(e,o){return i("c-col",{key:o,attrs:{options:t.colOptions}},[i("c-card",{class:[{open:e.open}],attrs:{options:t.cardOptions}},[i("h3",{staticClass:"header",style:{background:"url("+e.imgUrl+") center center /cover no-repeat"},attrs:{slot:"header"},slot:"header"},[t._v("\n              "+t._s(e.title)+"\n            ")]),i("div",{staticClass:"body"},[t._v("\n              "+t._s(e.desc)+"\n              "),i("div",{staticClass:"read-more-wrapper"},[i("c-button",{attrs:{options:{class:{primary:!0,elevation:!0}}},on:{click:function(i){t.showDetail(e,o)}}},[t._v("Read")])],1)]),i("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n              更新于： "+t._s(t._f("articleUpdatedAt")(e.updated_at))+"\n            ")])])],1)}),i("c-col",{staticClass:"pullup-wrapper",attrs:{options:t.colOptions}},[i("c-button",{class:[{refresh:t.isPullUpTrigger}],attrs:{options:{class:{primary:!0,elevation:!0,block:!0}},disabled:t.noMore},on:{click:t.getMoreArticle}},[t._v("\n            "+t._s(t.pullUpTips)+"\n          ")])],1)],2)],1),i("transition",{attrs:{name:"detail-slide"}},[i("c-row",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}],ref:"detail",staticClass:"detail",style:t.detailStyle,on:{scroll:t.detailScroll}},[i("c-col",{attrs:{options:{class:{md:{colspan:8,offset:2}}}}},[i("c-card",[i("div",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.detailArticle.content)}})])],1)],1)],1)],1)],1)},r=[],c=i("c93e"),s=i("2f62"),l=i("5a0c"),n=i.n(l),a=0,u="点击以加载更多内容",h="正在加载...",d="没有更多数据了",p={name:"Article",created:function(){this.articleList.length<1&&(console.time("getArticleList"),this.getArticleList({url:this.hostName,sort:{updated_at:-1}}),console.timeEnd("getArticleList"))},mounted:function(){var t=this;console.log("Article mounted"),setTimeout(function(){t.$emit("mounted",t.$el)},30)},beforeRouteEnter:function(t,e,i){console.warn("beforeRouteEnter Article");var o=t.query,r=t.params;i(function(t){t.setArticleStyle(t.movingDirectionY);var e=t.articleScrollY;setTimeout(function(){t.$refs.article.$el.scrollTo({top:e,behavior:"smooth"})},30),o.id&&r.article&&r.article.id===o.id?i():t.$router.push({name:"home.article"})})},beforeRouteUpdate:function(t,e,i){console.warn("beforeRouteUpdate Article"),i()},beforeRouteLeave:function(t,e,i){console.warn("beforeRouteLeave Article"),i()},data:function(){return{detailArticle:{},isPullUpTrigger:!1,msg:"",colOptions:{class:{md:{colspan:4}}},cardOptions:{class:{radius:!0}},articleStyle:{"padding-top":0,"padding-bottom":0},isShowDetail:!1}},computed:Object(c["a"])({},Object(s["c"])(["hostName","appHeight","appWidth"]),Object(s["c"])("home",["homeHeight","toolHeight","navHeight","isInitCompleted","currentShow"]),Object(s["c"])("article",["articleList","noMore","articleScrollY","articleScrollYMax","movingDirectionY"]),{pullUpTips:function(){return this.noMore?d:this.isPullUpTrigger?h:u},isShowArticleList:function(){return this.articleList&&this.articleList.length>0},detailStyle:function(){return{height:"".concat(this.appHeight,"px"),"margin-top":"".concat(this.toolHeight,"px"),"padding-bottom":"".concat(this.toolHeight,"px")}}}),filters:{articleUpdatedAt:function(t){return n()(t).format("YYYY年MM月DD日")}},methods:Object(c["a"])({},Object(s["b"])("article",["getArticleList","setMovingDirectionY","setArticleScroll"]),Object(s["b"])("home",["setCurrentShow","setShowToolBar","setShowNavBar"]),{detailScroll:function(t){},setArticleStyle:function(t){this.articleStyle=1===t?{height:"".concat(this.appHeight,"px"),"padding-top":"1rem","padding-bottom":"1rem"}:{height:"".concat(this.appHeight,"px"),"margin-top":"".concat(this.toolHeight,"px"),"margin-bottom":"".concat(this.navHeight,"px")}},getMoreArticle:function(t){this.isPullUpTrigger=!0,this.getArticleList({url:this.hostName,sort:{updated_at:-1}})},articleScroll:function(t){console.log("articleScroll");var e=t.target,i=e.scrollHeight,o=e.scrollLeft,r=e.scrollTop,c=e.scrollWidth;this.setArticleScroll({scrollHeight:i,scrollLeft:o,scrollTop:r,scrollWidth:c})},showDetail:function(t,e){var i=this;this.detailArticle=t,t.open=!0,this.$set(this.articleList,e,t),setTimeout(function(){t.open=!1,i.$set(i.articleList,e,t)},2e3),setTimeout(function(){i.$router.push({name:"home.article.detail",query:{id:t.id},params:{article:t}})},30)}}),watch:{detailArticle:function(t,e){var i=this;setTimeout(function(){i.$refs.detail.$el.scrollTo({top:0,behavior:"smooth"})},30)},currentShow:function(t,e){console.log(t,e),this.isShowDetail="home.article.detail"===t,this.isShowDetail&&(this.setShowToolBar(!0),this.setShowNavBar(!1))},articleList:function(t,e){this.isPullUpTrigger=!1},articleScrollY:function(t,e){this.setMovingDirectionY(t-e>0?1:-1)},movingDirectionY:function(t,e){console.log("count",a++,t),this.setArticleStyle(t)}},components:{"c-container":function(){return i.e("c-container").then(i.bind(null,"5b42"))},"c-row":function(){return i.e("c-row").then(i.bind(null,"ef38"))},"c-col":function(){return i.e("c-col").then(i.bind(null,"d15e"))},"c-button":function(){return i.e("button").then(i.bind(null,"eece"))},"c-card":function(){return i.e("c-card").then(i.bind(null,"cf50"))}}},f=p,m=(i("2cc2"),i("2877")),g=Object(m["a"])(f,o,r,!1,null,null,null);g.options.__file="Article.vue";e["default"]=g.exports}}]);
//# sourceMappingURL=article.27b8b5a0.js.map