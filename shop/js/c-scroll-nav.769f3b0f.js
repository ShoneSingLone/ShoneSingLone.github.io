(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c-scroll-nav"],{"33bf":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-sticky-ele"},[i("div",{staticClass:"cube-sticky-content"},[t._t("default")],2)])},n=[],r=(i("c5f6"),"cube-sticky-ele"),c={name:r,inject:["sticky"],props:{eleKey:{type:[Number,String]}},mounted:function(){this.sticky.addEle(this)},methods:{refresh:function(){var t=this.$el;t.firstElementChild&&(t.style.height="",t.style.height="".concat(t.offsetHeight,"px"))}},beforeDestroy:function(){this.sticky.removeEle(this)}},a=c,l=(i("be8d"),i("2877")),o=Object(l["a"])(a,s,n,!1,null,null,null);o.options.__file="sticky-ele.vue";e["a"]=o.exports},"386b":function(t,e,i){var s=i("5ca1"),n=i("79e5"),r=i("be13"),c=/"/g,a=function(t,e,i,s){var n=String(r(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(s).replace(c,"&quot;")+'"'),a+">"+n+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),s(s.P+s.F*n(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},"5e02":function(t,e,i){},"760e":function(t,e,i){},9602:function(t,e,i){"use strict";var s=i("5e02"),n=i.n(s);n.a},ad61:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-scroll-nav",class:{"cube-scroll-nav_side":t.side}},[i("cube-sticky",{ref:"sticky",attrs:{pos:t.scrollY},on:{change:t.stickyChangeHandler}},[i("cube-scroll",{ref:"scroll",attrs:{"scroll-events":t.scrollEvents,options:t.options,data:t.data},on:{scroll:t.scrollHandler,"scroll-end":t.scrollEndHandler}},[t._t("prepend"),i("div",{staticClass:"cube-scroll-nav-main"},[i("cube-sticky-ele",{ref:"navBarEle",attrs:{"ele-key":"cube-scroll-nav-bar"}},[t._t("bar",[i("cube-scroll-nav-bar",{attrs:{direction:t.barDirection,txts:t.barTxts,labels:t.labels,current:t.active}})],{txts:t.barTxts,labels:t.labels,current:t.active})],2),i("cube-sticky",{ref:"pageSticky",attrs:{offset:t.pageStickyOffset,pos:t.scrollY},on:{change:t.pageStickyChangeHandler}},[i("div",{staticClass:"cube-scroll-nav-panels"},[t._t("default")],2),t.side?t._e():i("template",{slot:"fixed"},[i("div")])],2)],1)],2)],1)],1)},n=[],r=(i("c5f6"),i("871d")),c={mounted:function(){this.$emit("mounted",this)}},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-sticky"},[t._t("default"),i("transition",{attrs:{name:t.fixedShowAni}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.fixedShow,expression:"fixedShow"}],ref:"fixedEle",staticClass:"cube-sticky-fixed"},[t._t("fixed",null,{current:t.currentKey,index:t.currentIndex})],2)])],2)},l=[],o=(i("ac6a"),i("d263"),i("d0c5")),u="cube-sticky",f="change",h="diff-change",d=Object(o["b"])("transform"),v={name:u,provide:function(){return{sticky:this}},props:{pos:{type:Number,required:!0},checkTop:{type:Boolean,default:!0},fixedShowAni:{type:String,default:function(){return this.checkTop?"":"cube-sticky-fixed-fade"}},offset:{type:Number,default:0}},data:function(){return{diff:0,currentDiff:0,currentIndex:-1,currentKey:""}},computed:{fixedShow:function(){var t=this.eles[this.currentIndex];return!!t}},watch:{diff:function(t){t>=0&&(t=0),t=Math.ceil(t),this._fixedTop!==t&&(this._fixedTop=t,this.$refs.fixedEle.style[d]="translate3d(0, ".concat(t,"px, 0)"))},pos:"computeCurrentSticky",currentIndex:function(t,e){var i=this,s=this.eles[e],n=this.eles[t],r=n&&void 0!==n.eleKey?n.eleKey:-1===t?"":t,c=this.$refs.fixedEle,a=this.$slots.fixed||this.$scopedSlots.fixed;this.$nextTick(function(){if(a)i.fixedEleHeight=c.offsetHeight;else{var t=c.firstElementChild;s&&(s.$el.appendChild(t),s.refresh()),n?(c.appendChild(n.$el.firstElementChild),i.fixedEleHeight=c.offsetHeight):i.fixedEleHeight=0}}),this.currentKey=r,this.$emit(f,r,t)},currentDiff:function(t){var e=this.heights[this.currentIndex]||0;this.$emit(h,t,e)}},created:function(){this.fixedEleHeight=0,this.eles=[],this.positions=[],this.heights=[]},mounted:function(){this.refresh()},methods:{addEle:function(t){this.eles.push(t)},removeEle:function(t){var e=this.eles.indexOf(t);this.eles.splice(e,1),this.positions.splice(e,1)},refresh:function(){var t=this;this.$nextTick(function(){t.eles.forEach(function(t){t.refresh()}),t._calculateHeight(),t.computeCurrentSticky(t.pos)})},computeCurrentSticky:function(t){t+=this.offset;for(var e=this.positions,i=this.heights,s=this.checkTop,n=e.length,r=n-1;r>=0;r--){var c=r===n-1,a=c?t:e[r+1],l=void 0,o=void 0;s?(l=e[r],o=l+i[r]):(l=e[r]+i[r],o=l);var u=Math.max(o,a);if(t>=l&&t<=u){this.currentIndex=r,this.currentDiff=t-l;var f=a-t;return void(this.diff=f>=0&&!c?f-(this.fixedEleHeight||i[r]):0)}}this.currentIndex=-1,this.currentDiff=0},_calculateHeight:function(){var t=this,e=this.eles;e.forEach(function(e,i){var s=Object(o["a"])(e.$el),n=s.top,r=s.height;t.positions[i]=n,t.heights[i]=r}),this.fixedEleHeight=this.$refs.fixedEle.offsetHeight}}},p=v,b=(i("f583"),i("2877")),m=Object(b["a"])(p,a,l,!1,null,null,null);m.options.__file="sticky.vue";var y=m.exports,x=i("33bf"),g=i("c3d4"),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-scroll-nav-bar",class:"cube-scroll-nav-bar_"+t.direction},[i("cube-scroll",{ref:"scroll",attrs:{options:t.options,direction:t.direction}},[i("div",{ref:"items",staticClass:"cube-scroll-nav-bar-items"},t._l(t.txts,function(e,s){return i("div",{key:s,staticClass:"cube-scroll-nav-bar-item",class:{"cube-scroll-nav-bar-item_active":t.active===t.labels[s]},on:{click:function(e){t.clickHandler(t.labels[s])}}},[t._t("default",[i("span",{domProps:{innerHTML:t._s(e)}})],{txt:e,index:s,active:t.active,label:t.labels[s]})],2)}))])],1)},$=[],_="horizontal",C="vertical",E="cube-scroll-nav-bar",S="change",H={name:E,inject:{scrollNav:{default:null}},mixins:[r["a"]],props:{direction:{type:String,default:_,validator:function(t){return t===_||t===C}},labels:{type:Array,default:function(){return[]}},txts:{type:Array,default:function(){return this.labels}},current:{type:[String,Number],default:""}},data:function(){return{active:this.current}},watch:{current:function(t){this.active=t},active:function(t){this.$emit(S,t),this._adjust()}},mounted:function(){var t=this;this.scrollNav&&this.scrollNav.setBar(this),this.active&&this.$nextTick(function(){t._adjust()})},beforeDestroy:function(){this.scrollNav&&this.scrollNav.setBar(null)},methods:{clickHandler:function(t){t!==this.active&&(this.active=t,this.scrollNav&&this.scrollNav.barChange(t))},refresh:function(){this.$refs.scroll.refresh(),this._adjust()},_adjust:function(){var t=this;this.$nextTick(function(){var e=t.direction===_,i=e?"clientWidth":"clientHeight",s=t.active,n=t.$refs.scroll.$el[i],r=t.$refs.items,c=r[i],a=Math.min(0,n-c),l=n/2,o=r.children,u=0;t.labels.every(function(t,e){return t===s?(u+=o[e][i]/2,!1):(u+=o[e][i],!0)});var f=l-u;f=Math.max(a,Math.min(0,f)),t.$refs.scroll.scrollTo(e?f:0,e?0:f,300)})}},components:{CubeScroll:g["default"]}},T=H,j=(i("9602"),Object(b["a"])(T,k,$,!1,null,null,null));j.options.__file="scroll-nav-bar.vue";var w=j.exports,N="horizontal",B="vertical",O="cube-scroll-nav",D="change",I="sticky-change",K={name:O,provide:function(){return{scrollNav:this}},mixins:[r["a"],c],props:{data:{type:Array},speed:{type:Number,default:300},side:{type:Boolean,default:!1},current:{type:[String,Number],default:""}},data:function(){return{scrollEvents:["scroll","scroll-end"],scrollY:0,panels:[],active:this.current,pageStickyOffset:0}},computed:{labels:function(){return this.panels.map(function(t){return t.label})},barTxts:function(){return this.panels.map(function(t){return t.title})},barDirection:function(){return this.side?B:N}},watch:{current:function(t){this.stickyCurrent=t,this.active=t,this.jumpTo(t)},active:function(t){this.$emit(D,t)}},created:function(){this.navBar=null,this.stickyCurrent=this.current},mounted:function(){var t=this;this.$nextTick(function(){if(t.side){var e=t.$refs.pageSticky.$refs.fixedEle;t.$refs.scroll.$el.appendChild(e)}t.current||(t.active=t.stickyCurrent=t.labels[0]),t.refresh(),t.jumpTo(t.current)})},methods:{refresh:function(){this.navBar&&this.navBar.refresh(),this.$refs.sticky.refresh(),this.$refs.pageSticky.refresh(),this.pageStickyOffset=this.side?0:this.$refs.navBarEle.$el.offsetHeight,this.$refs.scroll.refresh()},setBar:function(t){this.navBar=t},barChange:function(t){var e=this;this.active=t,this.$nextTick(function(){e.jumpTo(t)})},jumpTo:function(t){if(t){var e=this.getPanel(t);if(e){this._jumping=!0;var i=this.pageStickyOffset;this.$refs.scroll.scrollToElement(e.$el,this.speed,0,this.side?i:-i)}}},getPanel:function(t){var e=null;return this.panels.some(function(i){if(i.label===t)return e=i,!0}),e},pageStickyChangeHandler:function(t){""===t&&(t=this.labels[0]),this.stickyCurrent=t,this._jumping||(this.active=t)},stickyChangeHandler:function(t){var e=this;this.$nextTick(function(){e.navBar&&e.navBar.refresh()}),this.$emit(I,t)},scrollHandler:function(t){this.scrollY=-t.y,this._jumping||(this.active=this.stickyCurrent)},scrollEndHandler:function(){this._jumping=!1},addPanel:function(t){this.panels.push(t)},removePanel:function(t){var e=this.panels.indexOf(t);this.panels.splice(e,1)}},components:{CubeSticky:y,CubeStickyEle:x["a"],CubeScroll:g["default"],CubeScrollNavBar:w}},M=K,P=(i("e1bf"),Object(b["a"])(M,s,n,!1,null,null,null));P.options.__file="scroll-nav.vue";e["default"]=P.exports},be8d:function(t,e,i){"use strict";var s=i("760e"),n=i.n(s);n.a},d263:function(t,e,i){"use strict";i("386b")("fixed",function(t){return function(){return t(this,"tt","","")}})},e1bf:function(t,e,i){"use strict";var s=i("e466"),n=i.n(s);n.a},e466:function(t,e,i){},f583:function(t,e,i){"use strict";var s=i("fa3c"),n=i.n(s);n.a},fa3c:function(t,e,i){}}]);
//# sourceMappingURL=c-scroll-nav.769f3b0f.js.map