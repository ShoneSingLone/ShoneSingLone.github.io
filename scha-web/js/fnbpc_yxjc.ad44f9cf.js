(function(e){function t(t){for(var r,n,l=t[0],i=t[1],c=t[2],d=0,u=[];d<l.length;d++)n=l[d],o[n]&&u.push(o[n][0]),o[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={fnbpc_yxjc:0},o={fnbpc_yxjc:0},s=[];function l(e){return i.p+"js/"+({Aside:"Aside",Datagrid:"Datagrid",FormTable:"FormTable",ImageList:"ImageList",PickupTree:"PickupTree",FormTableItem:"FormTableItem",AvatarUpload:"AvatarUpload",CInputSearch:"CInputSearch"}[e]||e)+"."+{Aside:"f168a64e",Datagrid:"37d6e244",FormTable:"d4579f4b",ImageList:"c977139d",PickupTree:"239b4a2e",FormTableItem:"3ea633cb",AvatarUpload:"f5a8c0c6",CInputSearch:"cb6d2188"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],a={Datagrid:1,FormTable:1,ImageList:1,PickupTree:1,FormTableItem:1,AvatarUpload:1,CInputSearch:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise(function(t,a){for(var r="css/"+({Aside:"Aside",Datagrid:"Datagrid",FormTable:"FormTable",ImageList:"ImageList",PickupTree:"PickupTree",FormTableItem:"FormTableItem",AvatarUpload:"AvatarUpload",CInputSearch:"CInputSearch"}[e]||e)+"."+{Aside:"31d6cfe0",Datagrid:"aa0aa7d7",FormTable:"7aaaee07",ImageList:"3906b1bc",PickupTree:"e7740c7b",FormTableItem:"05265851",AvatarUpload:"c3972a9f",CInputSearch:"05265851"}[e]+".css",o=i.p+r,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=s[l],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===r||d===o))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){c=u[l],d=c.getAttribute("data-href");if(d===r||d===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete n[e],p.parentNode.removeChild(p),a(s)},p.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(p)}).then(function(){n[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,a){r=o[e]=[t,a]});t.push(r[2]=s);var c,d=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=l(e),c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+n+")");s.type=r,s.request=n,a[1](s)}o[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,d.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/scha-web/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=d;s.push([17,"chunk-vendors","chunk-common"]),a()})({17:function(e,t,a){e.exports=a("ea89")},ea89:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var r=a("a026"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"silde-fade"}},[a("keep-alive",{attrs:{include:"FnbpcFkjc"}},[a("router-view")],1)],1)],1)},o=[],s=(a("f751"),a("ac6a"),a("2909")),l=(a("7f7f"),a("be94")),i=(a("96cf"),a("1da1")),c=[{prop:"jcxm",label:"检查项目",colspan:1,rowspan:1},{prop:"jcsj",label:"检查时间",colspan:1,rowspan:1},{prop:"jcys",label:"检查医生",colspan:1,rowspan:1},{prop:"jcjg",label:"检查结果",colspan:1,rowspan:1},{prop:"yxs",label:"影像数",colspan:1,rowspan:1},{prop:"wh",label:"操作",colspan:1,rowspan:1}],d=[[{rowspan:1,colspan:1,items:[{prop:"jcxm",placeholder:"请选择检查项目",label:"检查项目",required:!0,type:"select",dataId:"panel_jcxm",data:[{label:"泌尿系B超",value:"泌尿系B超"},{label:"内科B超",value:"内科B超"},{label:"妇科腹部B超",value:"妇科腹部B超"},{label:"X线摄影（胸部片）",value:"X线摄影（胸部片）"}]}],width:"",type:"input"},{rowspan:1,colspan:1,items:[{prop:"jcdh",placeholder:"请输入检查单号",label:"检查单号",type:"input"}],width:"",type:"input"}],[{rowspan:1,colspan:1,items:[{prop:"jcsj",placeholder:"请选择检查时间",label:"检查时间",required:!0,type:"date.picker"}],width:"",type:"input"},{rowspan:1,colspan:1,items:[{prop:"jcys",placeholder:"请输入检查医生",label:"检查医生",type:"select"}],width:"",type:"input"}],[{rowspan:1,colspan:1,items:[{prop:"jlys",placeholder:"请选择记录医生",label:"记录医生",type:"select"}],width:"",type:"input"},{rowspan:1,colspan:1,items:[{prop:"jcjg",placeholder:"请输入检查结果",label:"检查结果",required:!0,type:"select"}],width:"",type:"input"}],[{rowspan:1,colspan:2,items:[{prop:"sm",placeholder:"请输入说明",label:"说明",multiline:!0,type:"textarea"}],width:"",type:"input"}]],u=[{prop:"text",label:"项目名称"},{prop:"ywsx",label:"业务缩写"},{prop:"zlx",label:"值类型"},{prop:"bzz",label:"值范围",width:300},{prop:"dw",label:"单位"},{prop:"jg",label:"结果"},{prop:"wh",label:"操作"}],p={jcxm:"",jcdh:"",jcsj:"",jcys:"",jlys:"",jcjg:"",sm:""},m={jcxm:[{required:!0,message:"不能为空",trigger:"blur"}],jcsj:[{required:!0,message:"不能为空",trigger:"blur"}],jcjg:[{required:!0,message:"不能为空",trigger:"blur"}]},h={dslTableHeaderTop:c,dslArray:d,dslTableHeaderSub:u,model:p,rules:m},b=h,f=[{title:!1,rows:[[{rowspan:1,colspan:3,items:[{prop:"bh",type:"input",placeholder:"请输入编号",label:"编号"}],width:"",type:"input"}],[{rowspan:1,colspan:3,items:[{prop:"xm",type:"input",placeholder:"请输入个人姓名",label:"个人姓名"}],width:"",type:"input"}]]}],g={ttmc:"",bh:"",ttlx:"",xm:""},v={message:"",type:""},y={name:"AppRoot",mounted:function(){},provide:function(){return{APP:this}},data:function(){return{modelAsideQuery:g,modelAsideList:[],modelTableHeaderTopList:[],model:b.model,modelTableHeaderSubList:[],modelAddTableHeaderSubListAdd:[],modelAddTableHeaderSubListRemove:[],rules:b.rules,dslAsideQuery:f,mock:b,modelInit:{},modelAdd:b.model,modelAddTableHeaderSubList:[],modelAddAsideTree:!1}},computed:{treeOptions:function(){var e={props:{children:"children",label:"xm"}};return e.data=this.modelAsideList,e}},methods:{handleUploaded:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.$loading(),r={showClose:!0,message:"保存失败",type:"warning"},e.prev=2,n=Object(l["a"])({},this.model,{imglist:t}),e.next=6,this.$post("/proxy/save",{coll:"hqbj_hj_yxjc",doc:n});case 6:if(o=e.sent,!o.isSuccess){e.next=13;break}"update"===this.$route.name&&this.model(n),this.$router.push({name:"home"}),r={showClose:!0,message:"保存成功",type:"success"},e.next=15;break;case 13:throw r={showClose:!0,message:o.data,type:"warn"},new Error(o.data);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),r={showClose:!0,message:e.t0.message,type:"warn"},console.log(e.t0);case 21:return e.prev=21,a.close(),this.$message(r),e.finish(21);case 25:case"end":return e.stop()}},e,this,[[2,17,21,25]])}));function t(t){return e.apply(this,arguments)}return t}(),goTo:function(e){this.$router.push({name:e})},c:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log.apply(console,t)},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.loading,a=a||this.$loading(),e.prev=2,r=this.modelAdd,r.listAdd=this.modelAddTableHeaderSubListAdd,r.listRemove=this.modelAddTableHeaderSubListRemove,e.next=8,this.$post("/proxy/save",{coll:"fnbpc_yxjc",doc:r});case 8:if(n=e.sent,!n.isSuccess){e.next=17;break}v={type:"success",message:"保存成功"},this.model=this.modelAdd,this.modelTableHeaderSubList=this.modelAddTableHeaderSubListAdd,this.getAsideList(),this.goTo("home"),e.next=18;break;case 17:throw new Error(n.data);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](2),v={type:"error",message:e.t0.message};case 23:return e.prev=23,a.close(),this.$message(Object(l["a"])({showClose:!0},v)),e.finish(23);case 27:case"end":return e.stop()}},e,this,[[2,20,23,27]])}));function t(){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.loading,e.next=3,this.$confirm("确实要删除当前的表单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:if(r=e.sent,r){e.next=6;break}return e.abrupt("return");case 6:return a=a||this.$loading(),n=this.model,e.prev=8,e.next=11,this.$post("/proxy/delete",{coll:"fnbpc_jbzl",doc:n});case 11:if(o=e.sent,!o.isSuccess){e.next=18;break}this.$message({showClose:!0,message:"删除成功",type:"success"}),this.model={},this.getAsideList(),e.next=20;break;case 18:throw console.log(o.data),new Error("error");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),this.$message({showClose:!0,message:e.t0.message,type:"error"});case 25:return e.prev=25,a.close(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[8,22,25,28]])}));function t(t){return e.apply(this,arguments)}return t}(),getAsideList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading(),a=this.modelAsideQuery,e.prev=2,e.next=5,this.$post("/proxy/get",{coll:"fnbpc_jbzl",doc:{},condition:a});case 5:r=e.sent,n=r.isSuccess,o=r.data,n&&(this.modelAsideList=o),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.close();case 15:case"end":return e.stop()}},e,this,[[2,11]])}));function t(){return e.apply(this,arguments)}return t}(),handleClickAside:function(e){var t=e.data;e.node,e.vm;console.log("handleClickAside",t),this.modelTableHeaderTopList=function(e){return Object(s["a"])(Array(10).keys()).map(function(t){return Object(l["a"])({},e,{jcdh:t})})}({jcxm:"检查项目",jcsj:Date.now(),jcys:"检查医生",jcjg:"检查结果",yxs:"影像数",wh:"操作"})},handleClickTableHeaderTopRow:function(e,t,a){console.log("handleClickTableHeaderTopRow",e),this.model=Object.assign({cysj:"2018-12-26",sjys:Date.now(),hysj:"2018-12-26",hyys:Date.now(),jcdh:"11",hyxm:"",hyjg:""},e),this.modelTableHeaderSubList=function(e){return Object(s["a"])(Array(4).keys()).map(function(t){return Object(l["a"])({},e,{jcdh:t+1})})}({name:"下载.png",url:"http://shonesinglone.leanapp.cn/imgs/cdgkpersonavatar.png"})}},watch:{model:function(e){console.clear(),console.log("model",e)}}},A=y,w=(a("a7a0"),a("241f"),a("2877")),j=Object(w["a"])(A,n,o,!1,null,null,null);j.options.__file="App.vue";var T=j.exports,P=a("8c4f"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view aside"},[a("c-aside",{on:{clickAside:e.APP.handleClickAside}}),a("main",{staticClass:"main"},[a("div",{staticClass:"tool-bar fixed"},[a("el-button",{on:{click:function(t){e.APP.goTo("add")}}},[e._v("新增")]),a("el-button",{staticClass:"button",attrs:{disabled:!Boolean(e.APP.model.jcdh)},on:{click:function(t){e.APP.goTo("update")}}},[e._v("修改")]),a("el-button",{attrs:{disabled:!Boolean(e.APP.model.jcdh)},on:{click:e.APP.remove}},[e._v("删除")])],1),a("div",{staticClass:"tool-bar"}),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:1}},[a("el-table",{staticStyle:{width:"99%"},attrs:{data:e.APP.modelTableHeaderTopList,height:"200","highlight-current-row":""},on:{"row-click":e.APP.handleClickTableHeaderTopRow}},[e._l(e.APP.mock.dslTableHeaderTop,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label}})]})],2)],1),a("el-collapse-item",{attrs:{name:2}},[a("c-table",{ref:"topTabe",staticClass:"box-card",attrs:{dsl:e.APP.mock.dslArray,rules:e.APP.rules,tableInfo:{cellspacing:2},disabled:!0},model:{value:e.APP.model,callback:function(t){e.$set(e.APP,"model",t)},expression:"APP.model"}})],1),a("el-collapse-item",{attrs:{title:"影像列表",name:3}},[a("div",{attrs:{id:"img-list-panel"}},[a("c-image-list",{ref:"imgUpload",attrs:{readonly:!0},model:{value:e.APP.modelTableHeaderSubList,callback:function(t){e.$set(e.APP,"modelTableHeaderSubList",t)},expression:"APP.modelTableHeaderSubList"}})],1)])],1)],1)],1)},k=[],L={components:{CTable:function(){return a.e("FormTable").then(a.bind(null,"1b52"))},CImageList:function(){return a.e("ImageList").then(a.bind(null,"669b"))},CAside:function(){return a.e("Aside").then(a.bind(null,"85da"))},CDatagrid:function(){return a.e("Datagrid").then(a.bind(null,"5710"))},CPickupTree:function(){return a.e("PickupTree").then(a.bind(null,"b737"))}}},C={name:"FnbpcFkjc",mixins:[L],inject:["APP"],mounted:function(){this.APP.getAsideList()},data:function(){return{asideTree:[],activeNames:[1,2,3]}},methods:{}},S=C,$=Object(w["a"])(S,x,k,!1,null,null,null);$.options.__file="Main.vue";var O=$.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view aside"},[a("main",{staticClass:"main"},[a("div",{staticClass:"tool-bar fixed"},[a("el-button",{on:{click:function(t){e.goTo("home")}}},[e._v("放弃编辑")]),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1),a("div",{staticClass:"tool-bar"}),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:2}},[a("c-table",{ref:"topTabe",staticClass:"box-card",attrs:{dsl:e.APP.mock.dslArray,rules:e.APP.rules,tableInfo:{cellspacing:2}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),a("el-collapse-item",{attrs:{title:"影像列表",name:3}},[a("div",{attrs:{id:"img-list-panel"}},[e.modelList?a("c-image-list",{ref:"imgUpload",attrs:{options:{action:"/proxy/upload"}},on:{whenUploaded:e.APP.handleUploaded,addImg:e.modelListAdd,removeImg:e.modelListRemove},model:{value:e.modelList,callback:function(t){e.modelList=t},expression:"modelList"}}):e._e()],1)])],1)],1)])},H=[],I=(a("20d6"),{name:"HqbjHjHyjc",mixins:[L],inject:["APP"],beforeRouteEnter:function(e,t,a){a(function(t){console.warn("beforeRouteEnter",e.name);var a=e.name,r={add:function(){t.model={jcxm:"jcxm",jcdh:"jcdh",jcsj:"",jcys:"jcys",jlys:"jlys",jcjg:"jcjg",sm:""}},update:function(){t.model=JSON.parse(JSON.stringify(t.APP.model)),t.modelList=JSON.parse(JSON.stringify(t.APP.modelTableHeaderSubList)),t.modelListAdd=[],t.modelListRemove=[]}};r[a]&&r[a](),t.APP.modelAddAsideTree||Object(i["a"])(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$post("/proxy/get",{coll:"dictionary",doc:{name:"HyjcAppendTree"}});case 2:a=e.sent,a.data&&a.data.length>0&&a.data[0].data&&t.$set(t.APP,"modelAddAsideTree",a.data[0].data);case 4:case"end":return e.stop()}},e,this)}))()})},mounted:function(){},data:function(){return{model:{},modelList:[],modelListAdd:[],modelListRemove:[],activeNames:[2,3]}},methods:{goTo:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("确实要放弃编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return");case 5:this.APP.goTo("home");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleCheckChange:function(){var e=this.$refs.pickupTree.getTree(),t=!0,a=e.getCheckedNodes(t);console.log("currentChecked",a);var r=Object(s["a"])(this.modelList);a.map(function(e,t){for(var n=0;n<r.length;n++){var o=r[n];if(o.id===e.id)return void(a[t]=o)}}),this.modelList=a},deleteTableRow:function(e,t){console.log("deleteTableRow",e,t);var a,r=Object(s["a"])(this.currentTableModelAdd),n=r.findIndex(function(t){return t.id===e.id});a=r.splice(n,1),console.log("delete",a),this.setCurrentTableModelAdd(r)},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.$refs.imgUpload.abort(),e.prev=2,e.next=5,this.$refs.topTabe.valid();case 5:if(!e.sent){e.next=12;break}a={update:function(){t.APP.modelAdd=t.model,t.APP.modelAddTableHeaderSubListAdd=t.$refs.imgUpload.uploadedList,t.APP.modelAddTableHeaderSubListRemove=t.$refs.imgUpload.removedList},add:function(){t.APP.modelAdd=t.model,t.APP.modelAddTableHeaderSubListAdd=t.$refs.imgUpload.uploadedList,t.APP.modelAddTableHeaderSubListRemove=[]}},r=t.$route.name,a[r]&&a[r](),t.APP.save(),e.next=13;break;case 12:throw new Error("请按照提示检查输入项");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),this.$message({showClose:!0,message:e.t0.message,type:"warning"});case 18:case"end":return e.stop()}},e,this,[[2,15]])}));function t(){return e.apply(this,arguments)}return t}()},computed:{}}),R=I,F=Object(w["a"])(R,_,H,!1,null,null,null);F.options.__file="MainAdd.vue";var N=F.exports;r["default"].use(P["a"]);var E=new P["a"]({routes:[{path:"*",redirect:"/"},{path:"/",name:"home",component:O},{path:"/add",name:"add",component:N},{path:"/update",name:"update",component:N}]}),B=(a("7378"),a("fa6d"),a("13af")),U=a("f65b");r["default"].prototype.$global=U["a"],r["default"].prototype.$post=B["b"],r["default"].prototype.$get=B["a"],r["default"].config.productionTip=!1,new r["default"]({router:E,render:function(e){return e(T)}}).$mount("#app")}});
//# sourceMappingURL=fnbpc_yxjc.ad44f9cf.js.map